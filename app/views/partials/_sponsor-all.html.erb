<!-- Shadow area -->
<div class="shadow-top"></div>
<!-- /Shadow area -->
<!-- Catalog area -->
<div id="sponsor-wrapper" class="">
  <%# cache do %>
    <% fetch_sponsors.each do |sponsor_item| %>
      <div style="height:150px;" class="g2 <%= cycle('', '', '', '', '', '') %>">
        <%= link_to( image_tag(sponsor_item.sponsor.url, :alt => sponsor_item.description, :style => ''), sponsor_item.link ) %>
      </div>
    <% end %>
  <%# end %>
</div>
<!-- /Catalog area -->
<!-- Shadow area -->
<div class="shadow-bottom"></div>
<!-- /Shadow area -->

<script type="text/javascript">
	function initSize(){
	if(window.innerWidth<960){
			var area_width=$('#sponsor-wrapper').width();
			console.log('area-width:'+area_width);
			var item_width=$('#sponsor-wrapper .g2').width()+4;
			var items_per_row;

			var first_indent=30;
			var last_inent

			min_indent=5;

			if(area_width<=609 && area_width>=410)
			{
				items_per_row=3;
			}	
			else if(area_width<410)
			{
				items_per_row=2;
			}
			else 
			{
				items_per_row=3;
			}

			var margin_left=(area_width - (items_per_row*item_width)) / (items_per_row+1);
			console.log('area:'+area_width+';items_per_row:'+items_per_row+';item_width:'+item_width+';margin_left:'+margin_left);
			$('#sponsor-wrapper .g2').css({'margin-left':margin_left});
		}
		else
		{
			//console.log('area width:'+$());
			$('#sponsor-wrapper .g2').attr('style','');
		}

}
	$(window).resize(initSize);
	initSize();

</script>